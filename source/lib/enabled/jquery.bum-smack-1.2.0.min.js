/*!
jquery.bum-smack 08-01-2014
 https://github.com/mrjoelkemp/jquery.bum-smack
 implentation example: https://gist.github.com/Atinux/1522344 demo: http://infinite-scroll.eu01.aws.af.cm/
*/
!function(a){"use strict";a.fn.smack=function(b){b=a.extend({},{edge:"bottom"},b),b=a.extend({},{threshold:"top"===b.edge?0:1,deferred:new a.Deferred},b);var c=a(this),d=c.data("bum-smack")||{};return d[b.edge]=b,d.scrollTop=c.scrollTop(),c.data("bum-smack",d),c.off("scroll.smack").on("scroll.smack",function(){var b,e,f,g,h=c.scrollTop(),i=c[0]===window?c.height():c.innerHeight(),j=c[0]===window?a(document).height():c[0].scrollHeight,k=h>d.scrollTop?"down":h<d.scrollTop?"up":!1,l=h+i;d.scrollTop=h,"down"===k&&d.bottom&&(b=-1!==d.bottom.threshold.toString().toLowerCase().indexOf("px"),g=b?j-parseInt(d.bottom.threshold,10):Math.floor(j*d.bottom.threshold),l>=g&&(d.bottom.deferred.resolve(),d.bottom=!1,c.data("bum-smack",d))),"up"===k&&d.top&&(e=-1!==d.top.threshold.toString().toLowerCase().indexOf("px"),f=e?parseInt(d.top.threshold,10):Math.floor(j*d.top.threshold),f>=h&&(d.top.deferred.resolve(),d.top=!1,c.data("bum-smack",d))),d.top||d.bottom||c.off("scroll.smack")}),b.deferred.promise()}}(window.jQuery);